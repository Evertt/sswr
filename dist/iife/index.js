(()=>{var O=Object.create,m=Object.defineProperty,w=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty,y=Object.getOwnPropertyNames,K=Object.getOwnPropertyDescriptor;var b=r=>m(r,"__esModule",{value:!0});var x=(r,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of y(e))!P.call(r,t)&&t!=="default"&&m(r,t,{get:()=>e[t],enumerable:!(s=K(e,t))||s.enumerable});return r},v=r=>x(b(m(r!=null?O(w(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var R=v(require("swrev")),S=v(require("svelte/store"));var c=v(require("swrev")),o="sswr-",f=class extends c.DefaultCache{constructor(){super();let e=this.storage();if(!!e){for(let s=0;s<e.length;s++){let t=e.key(s);if(t.slice(0,o.length)!==o)continue;let l=t.slice(o.length),d=e.getItem(t),a=JSON.parse(d);this.elements.set(l,new c.CacheItem({data:a.data,expiresAt:a.expiresAt?new Date(a.expiresAt):null}))}setInterval(this.purge,15e3)}}storage(){return typeof window!="undefined"&&"sessionStorage"in window&&window.sessionStorage||null}purge(){this.elements.forEach((e,s)=>{e.hasExpired()&&this.remove(s,{broadcast:!1})})}remove(e,s){super.remove(e,s),this.storage()?.removeItem(o+e)}resolve(e,s){Promise.resolve(s.data).then(t=>{if(t==null)return this.remove(e);s.data=t,this.storage()?.setItem(o+e,JSON.stringify(s)),this.broadcast(e,t)})}};var W=class extends R.SWR{useSvelte(e,s){let t=()=>{},i=(0,S.writable)(this.get(this.resolveKey(e)),()=>()=>t()),l=(0,S.writable)(void 0,()=>()=>t()),d=n=>i.set(n),a=n=>l.set(n);return t=this.use(e,d,a,s).unsubscribe,i.then=n=>new Promise(h=>{let D,p=()=>{};p=i.subscribe(u=>{if(u!==void 0){p(),D=u;let g=n?.(u);h(g||u)}}),D&&p()}),{data:i,error:l,mutate:(n,h)=>this.mutate(this.resolveKey(e),n,h),revalidate:n=>this.revalidate(this.resolveKey(e),n),clear:n=>this.clear(this.resolveKey(e),n),unsubscribe:t,then:n=>{i.then(n).then(()=>t())}}}},G=(r={})=>{let e=new W({cache:new f,...r});return{useSWR:(s,t)=>e.useSvelte(s,t),mutate:(s,t,i)=>e.mutate(s,t,i),revalidate:(s,t)=>e.revalidate(s,t),clear:(s,t)=>e.clear(s,t)}};})();
