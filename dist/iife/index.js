(()=>{var g=Object.create,d=Object.defineProperty,W=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,O=Object.getOwnPropertyNames,K=Object.getOwnPropertyDescriptor;var x=n=>d(n,"__esModule",{value:!0});var P=(n,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of O(e))!y.call(n,t)&&t!=="default"&&d(n,t,{get:()=>e[t],enumerable:!(s=K(e,t))||s.enumerable});return n},p=n=>P(x(d(n!=null?g(W(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var h=p(require("swrev")),S=p(require("svelte/store"));var l=p(require("swrev")),m=class extends l.DefaultCache{constructor(){super();if(typeof window!="undefined"){for(let e=0;e<localStorage.length;e++){let s=window.sessionStorage.key(e),t=s.replace(/^sswr-/,"");if(s===t)continue;let i=window.sessionStorage.getItem(s),a=JSON.parse(i);this.elements.set(t,new l.CacheItem({data:a.data,expiresAt:a.expiresAt?new Date(a.expiresAt):null}))}setInterval(()=>this.purge(),15e3)}}purge(){for(let e=0;e<localStorage.length;e++){let s=window.sessionStorage.key(e),t=s.replace(/^sswr-/,"");if(s===t)continue;let i=window.sessionStorage.getItem(s),a=JSON.parse(i);!a.expiresAt||new Date(a.expiresAt).getTime()>=new Date().getTime()||this.remove(t,{broadcast:!1})}}remove(e,s){super.remove(e,s),typeof window!="undefined"&&window.sessionStorage.removeItem(`sswr-${e}`)}resolve(e,s){Promise.resolve(s.data).then(t=>{if(t==null)return this.remove(e);s.data=t,typeof window!="undefined"&&window.sessionStorage.setItem(`sswr-${e}`,JSON.stringify(s)),this.broadcast(e,t)})}};var v=class extends h.SWR{useSvelte(e,s){let t=()=>{},i=(0,S.writable)(this.get(this.resolveKey(e)),()=>()=>t()),a=(0,S.writable)(void 0,()=>()=>t()),f=r=>i.set(r),D=r=>a.set(r);return t=this.use(e,f,D,s).unsubscribe,i.then=r=>new Promise(c=>{let w,u=()=>{};u=i.subscribe(o=>{if(o!==void 0){u(),w=o;let R=r?.(o);c(R||o)}}),w&&u()}),{data:i,error:a,mutate:(r,c)=>this.mutate(this.resolveKey(e),r,c),revalidate:r=>this.revalidate(this.resolveKey(e),r),clear:r=>this.clear(this.resolveKey(e),r),unsubscribe:t,then:r=>{i.then(r).then(()=>t())}}}},F=(n={})=>{let e=new v({cache:new m,...n});return{useSWR:(s,t)=>e.useSvelte(s,t),mutate:(s,t,i)=>e.mutate(s,t,i),revalidate:(s,t)=>e.revalidate(s,t),clear:(s,t)=>e.clear(s,t)}};})();
