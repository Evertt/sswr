(()=>{var R=Object.create,p=Object.defineProperty,W=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,O=Object.getOwnPropertyNames,K=Object.getOwnPropertyDescriptor;var P=n=>p(n,"__esModule",{value:!0});var b=(n,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of O(e))!y.call(n,t)&&t!=="default"&&p(n,t,{get:()=>e[t],enumerable:!(s=K(e,t))||s.enumerable});return n},m=n=>b(P(p(n!=null?R(W(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var g=m(require("swrev")),S=m(require("svelte/store"));var l=m(require("swrev")),w=class extends l.DefaultCache{constructor(){super();if(typeof window!="undefined"){for(let e=0;e<window.sessionStorage.length;e++){let s=window.sessionStorage.key(e),t=s.replace(/^sswr-/,"");if(s===t)continue;let r=window.sessionStorage.getItem(s),o=JSON.parse(r);this.elements.set(t,new l.CacheItem({data:o.data,expiresAt:o.expiresAt?new Date(o.expiresAt):null}))}setInterval(()=>this.purge(),15e3)}}purge(){console.log("purging...");for(let e=0;e<window.sessionStorage.length;e++){let s=window.sessionStorage.key(e),t=s.replace(/^sswr-/,"");if(s===t)continue;let r=window.sessionStorage.getItem(s),o=JSON.parse(r);if(!o.expiresAt)continue;let u=new Date(o.expiresAt);console.log("Found item to purge"),!(u.getTime()>=new Date().getTime())&&(console.log("purging item..."),this.remove(t,{broadcast:!1}))}}remove(e,s){super.remove(e,s),typeof window!="undefined"&&window.sessionStorage.removeItem(`sswr-${e}`)}resolve(e,s){Promise.resolve(s.data).then(t=>{if(t==null)return this.remove(e);s.data=t,typeof window!="undefined"&&window.sessionStorage.setItem(`sswr-${e}`,JSON.stringify(s)),this.broadcast(e,t)})}};var h=class extends g.SWR{useSvelte(e,s){let t=()=>{},r=(0,S.writable)(this.get(this.resolveKey(e)),()=>()=>t()),o=(0,S.writable)(void 0,()=>()=>t()),u=i=>r.set(i),v=i=>o.set(i);return t=this.use(e,u,v,s).unsubscribe,r.then=i=>new Promise(c=>{let f,d=()=>{};d=r.subscribe(a=>{if(a!==void 0){d(),f=a;let D=i?.(a);c(D||a)}}),f&&d()}),{data:r,error:o,mutate:(i,c)=>this.mutate(this.resolveKey(e),i,c),revalidate:i=>this.revalidate(this.resolveKey(e),i),clear:i=>this.clear(this.resolveKey(e),i),unsubscribe:t,then:i=>{r.then(i).then(()=>t())}}}},B=(n={})=>{let e=new h({cache:new w,...n});return{useSWR:(s,t)=>e.useSvelte(s,t),mutate:(s,t,r)=>e.mutate(s,t,r),revalidate:(s,t)=>e.revalidate(s,t),clear:(s,t)=>e.clear(s,t)}};})();
